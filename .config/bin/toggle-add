#!/bin/bash

ON=ADD@backstage
OFF=shade-inactive-windows@hepaajan.iki.fi


enabled() {
    e=$1
    if gsettings get org.gnome.shell enabled-extensions | grep -q "$e"; then
        return 0;
    else
        return 1;
    fi
}

disable() {
    e=$1
    for i in $(seq 3); do
        if enabled $e; then
            gnome-shell-extension-tool --disable $e;
        else
            break;
        fi
    done
}

enable() {
    e=$1
    if ! enabled $e; then
        gnome-shell-extension-tool --enable $e;
    fi
}

if gsettings get org.gnome.shell enabled-extensions | grep -q $ON; then
    disable $ON;
    enable $OFF;
else
    disable $OFF;
    enable $ON;
fi
